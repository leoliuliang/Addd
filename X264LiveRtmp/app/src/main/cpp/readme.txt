native的架构

一、编码工具类
VideoChannel


二、RTMP推送类


需要多线程，并将码流添加到队列里，编码工具编码好一帧packet就放入队列里，rtmp推送类就一直从队列里取packet实现推流

直播假如有b帧是不是会卡顿？
B帧需要被缓存，在直播里为了实时性，所以B帧是很少的，一般在电影里B帧比较多。

x264支持4k、8k编码吗？
都支持的，不过硬件条件不够的话，编码解码这种等级的视频时间会非常长，也是得不偿失.

MediaCodec和x264怎么取舍？
没有取舍，必须同时支持，硬编码为主，软编码为辅.

网络不好可以动态设置码率吗？
可以，x264可以通过参数设置码率，i_rc_method.

x264里帧率怎么储存的？
x264存fps为了最节省内存，直接存时间肯定不是最省内存的，x264 通过分子分母来设置帧率fps，每一帧间隔时间(fps)=1s(分子)/帧率(分母), 这样可做到完美储存帧率.

直播中如何 音视频同步？
直播中音视频同步不难，因为都是实时的，只要同步推送pts就行了。